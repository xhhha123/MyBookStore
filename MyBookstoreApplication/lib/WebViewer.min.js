var PDFTron=PDFTron||{};if(typeof console==="undefined")window.console={log:function(){},warn:function(){},error:function(){}};
PDFTron.WebViewer=function WebViewer(options,element){this.options=$.extend(true,{},PDFTron.WebViewer.Options,options);if(typeof options.path!=="undefined"){var lastCharIndex=this.options.path.length-1;if(lastCharIndex>0&&this.options.path[lastCharIndex]!=="/")this.options.path+="/";this.options.flashPath=this.options.path+this.options.flashPath;this.options.html5Path=this.options.path+this.options.html5Path;this.options.html5MobilePath=this.options.path+this.options.html5MobilePath;this.options.silverlightPath=
this.options.path+this.options.silverlightPath}this.element=element;$(this.element).css("overflow","hidden");if(this.options.autoCreate)this.create()};
PDFTron.WebViewer.prototype={version:"1.7.1",create:function(){var me=this;if(typeof this.options.initialDoc!=="undefined"){var docPath=this._correctRelativePath(this.options.initialDoc);docPath=encodeURIComponent(docPath);this.options.initialDoc=docPath;this._create()}else if(typeof this.options.cloudApiId!=="undefined")$.get("https://api.pdftron.com/v2/download/"+this.options.cloudApiId+"?type=xod&redirect=false",function(data){if(typeof data.url==="undefined")me.loadErrorPage();else{me.options.initialDoc=
encodeURIComponent(data.url);me._create()}},"json").error(function(){me.loadErrorPage()})},_create:function(){var me=this;me.rcId=((1+Math.random())*65536|0).toString(16).substring(1);if(typeof this._trigger==="undefined")this._trigger=function(type,event,data1,data2){event=$.Event(event);event.type=type;event.target=$(this.element)[0];var data=[];if(typeof data1!=="undefined")data.push(data1);if(typeof data2!=="undefined")data.push(data2);$(this.element).trigger(event,data)};var viewers=this.options.type.replace(" ",
"").split(",");if(viewers.length<1)viewers[0]="html5";me._flashVer="10.2";me._flashFABridgeId="ReaderControl";me._silverlightVer="4.0";me._createViewer(viewers)},_createViewer:function(viewers){var me=this;me.selectedType="none";if(this.isMobileDevice()){viewers=Array("html5Mobile");me.selectedType="html5Mobile";if(this.options.mobileRedirect){var newLocation=this.options.html5MobilePath+this._getHTML5OptionsURL();window.location=newLocation;return}}var allowHTML5=false;var allowSilverlight=false;
var allowFlash=false;for(var i=0;i<viewers.length;i++){if(viewers[i].toLowerCase()==="html5mobile"){allowHTML5=true;if(me._testHTML5()&&(me.isSameOrigin(decodeURIComponent(me.options.initialDoc))||me._testCORS())){me.selectedType="html5Mobile";break}}if(viewers[i].toLowerCase()==="html5"){allowHTML5=true;if(me._testHTML5()){var sameOrigin=me.isSameOrigin(decodeURIComponent(me.options.initialDoc));if(sameOrigin||(me._testCORS()||me._testSilverlight(me._silverlightVer))){me.selectedType="html5";break}}}else if(viewers[i].toLowerCase()===
"silverlight"){allowSilverlight=true;if(me._testSilverlight(me._silverlightVer)){me.selectedType="silverlight";break}}else if(viewers[i].toLowerCase()==="flash"){allowFlash=true;if(me._testFlash(me._flashVer)){me.selectedType="flash";break}}}if(me.selectedType==="html5"){if(this.options.html5Options)$.extend(this.options,this.options.html5Options);me._createHTML5()}else if(me.selectedType==="html5Mobile"){if(this.options.html5MobileOptions)$.extend(this.options,this.options.html5MobileOptions);me._createHTML5Mobile()}else if(me.selectedType===
"silverlight"){if(this.options.silverlightOptions)$.extend(this.options,this.options.silverlightOptions);me._createSilverlight()}else if(me.selectedType==="flash"){if(this.options.flashOptions)$.extend(this.options,this.options.flashOptions);me._createFlash()}else{var supportErrorArray=new Array;supportErrorArray.push("Please");if(allowHTML5){supportErrorArray.push("use an HTML5 compatible browser");if(allowSilverlight||allowFlash)supportErrorArray.push("or")}if(allowSilverlight||allowFlash){var runtimesStr=
"("+(allowSilverlight?"Silverlight":"")+(allowSilverlight&&allowFlash?" or ":"")+(allowFlash?"Flash":"")+")";supportErrorArray.push("install the necessary runtime "+runtimesStr)}$(me.element).append('<div id="webviewer-browser-unsupported">'+supportErrorArray.join(" ")+".</div>")}},_viewerLoaded:function(iframe){var me=this;me._trigger("ready");var viewerWindow=iframe.contentWindow;if(typeof me.options.encryption!=="undefined"){var decrypt=viewerWindow.CoreControls.Encryption.Decrypt;var doc=decodeURIComponent(me.options.initialDoc);
var streaming=me.options.streaming;viewerWindow.ControlUtils.byteRangeCheck(function(status){if(status===200)streaming=true;me.instance.loadDocument(doc,streaming,decrypt,me.options.encryption)},function(){streaming=true;me.instance.loadDocument(doc,streaming,decrypt,me.options.encryption)})}if(me.instance.docViewer.GetDocument()==null)viewerWindow.$(iframe.contentDocument).bind("documentLoaded",function(event){me._trigger(event.type)});else me._trigger("documentLoaded");viewerWindow.$(iframe.contentDocument).bind("displayModeChanged layoutModeChanged zoomChanged pageChanged fitModeChanged toolModeChanged printProgressChanged",
function(event,data1,data2){me._trigger(event.type,null,data1,data2)})},_getHTML5OptionsURL:function(){var options=this.options;var url="";if(typeof options.initialDoc!=="undefined"){url+="#d="+options.initialDoc;if(options.streaming)url+="&streaming=true";if(options.encryption)url+="&auto_load=false";if(options.enableAnnotations)url+="&a=1";if(typeof options.serverUrl!=="undefined"){var serverUrl=this._correctRelativePath(options.serverUrl);serverUrl=encodeURIComponent(serverUrl);url+="&server_url="+
serverUrl}if(typeof options.documentId!=="undefined")url+="&did="+options.documentId;if(typeof options.config!=="undefined"){var config=this._correctRelativePath(options.config);config=encodeURIComponent(config);url+="&config="+config}if(options.enableOfflineMode)url+="&offline=1";if(options.startOffline)url+="&startOffline=1";if(options.enableReadOnlyMode)url+="&readonly=1";if(typeof options.annotationUser!=="undefined")url+="&user="+options.annotationUser;if(typeof options.annotationAdmin!=="undefined")url+=
"&admin="+(options.annotationAdmin?1:0);if(typeof options.custom!=="undefined")url+="&custom="+encodeURIComponent(options.custom);if(typeof options.showToolbarControl!=="undefined")url+="&toolbar="+(options.showToolbarControl?"true":"false")}return url},_createHTML5:function(){var me=this;var iframeSource=this.options.html5Path+this._getHTML5OptionsURL();if(!me.isSameOrigin(decodeURIComponent(me.options.initialDoc))&&(!me._testCORS()&&this._testSilverlight(me._silverlightVer)))iframeSource+="&useSilverlightRequests=true";
var $rcFrame=$(document.createElement("iframe"));$rcFrame.attr({id:this.rcId,src:iframeSource,frameborder:0,width:"100%",height:"100%",allowFullScreen:true,webkitallowfullscreen:true,mozallowfullscreen:true});var outerWindow=window;$rcFrame.load(function(){me.instance=this.contentWindow.readerControl;outerWindow.CoreControls=outerWindow.CoreControls||{};outerWindow.CoreControls.DisplayModes=this.contentWindow.CoreControls.DisplayModes;outerWindow.Tools=this.contentWindow.Tools;var iframe=this;if(typeof me.instance===
"undefined")this.contentWindow.$(this.contentDocument).bind("viewerLoaded",function(event){me.instance=iframe.contentWindow.readerControl;me._viewerLoaded(iframe)});else me._viewerLoaded(iframe)});$(this.element).append($rcFrame);return $rcFrame},_createHTML5Mobile:function(){var me=this;var iframeSource=this.options.html5MobilePath+this._getHTML5OptionsURL();var $rcFrame=$(document.createElement("iframe"));$rcFrame.attr({id:this.rcId,src:iframeSource,frameborder:0});$rcFrame.css("width","100%").css("height",
"100%");$rcFrame.load(function(){me.instance=this.contentWindow.readerControl;var iframe=this;if(typeof me.instance==="undefined")this.contentWindow.$(this.contentDocument).bind("viewerLoaded",function(event){me.instance=iframe.contentWindow.readerControl;me._viewerLoaded(iframe)});else me._viewerLoaded(iframe)});$(this.element).append($rcFrame);return $rcFrame},_getSilverlightInitParam:function(){var options=this.options;var initParam="";initParam+="ShowToolbarControl="+(options.showToolbarControl?
"true":"false");if(typeof options.initialDoc!=="undefined"){initParam+=",DocumentUri="+function decode(str){return unescape(str.replace(/\+/g," "))}(options.initialDoc);if(options.streaming)initParam+=",Streaming=true";else initParam+=",Streaming=false";if(options.enableAnnotations)initParam+=",a=true";else initParam+=",a=false";if(typeof options.serverUrl!=="undefined"){var serverUrl=this._correctRelativePath(options.serverUrl);initParam+=",server_url="+serverUrl}if(typeof options.documentId!=="undefined")initParam+=
",did="+options.documentId;if(typeof options.config!=="undefined")initParam+=",config="+options.config;if(options.enableOfflineMode)initParam+=",offline=true";if(options.enableReadOnlyMode)initParam+=",readonly=true";if(typeof options.annotationUser!=="undefined")initParam+=",user="+options.annotationUser;if(typeof options.annotationAdmin!=="undefined")if(options.annotationAdmin)initParam+=",admin=true";else initParam+=",admin=false";if(typeof options.custom!=="undefined")initParam+=",custom="+encodeURIComponent(options.custom);
if(typeof options.nogui)initParam+=",nogui="+options.nogui}return initParam},_createSilverlight:function(){var me=this;var options=this.options;var initParam=this._getSilverlightInitParam();var objectParams={"source":options.silverlightPath,"minRuntimeVersion":"4.0.50401.0","autoUpgrade":"true"};$.extend(objectParams,options.silverlightObjectParams);var objectElement=Silverlight.createObject(options.silverlightPath,null,me.rcId,objectParams,{onLoad:function(sender,args){me.instance=sender.Content.ReaderControl;
me.instance.EnableAnnotations=options.enableAnnotations;me.instance.onPropertyChanged=function(sender2,args2){switch(args2.name){case "CurrentPageNumber":me._trigger("pageChanged",null,{pageNumber:args2.pageNumber});break;case "DisplayMode":me._trigger("displayModeChanged");break;case "LayoutMode":me._trigger("layoutModeChanged");break;case "Zoom":me._trigger("zoomChanged");break;case "FitMode":me._trigger("fitModeChanged");break;case "ToolMode":me._trigger("toolModeChanged");break}};me._trigger("ready");
me.instance.onDocumentLoaded=function(sender3,args3){me._trigger("documentLoaded")}},onError:function(){console.error("Silverlight onError")}},initParam,null);$(objectElement).attr({"width":"100%","height":"100%"}).appendTo(me.element)},_createFlash:function(){var me=this;var options=this.options;var swfUrlStr=options.flashPath;var flashObj=document.createElement("object");flashObj.setAttribute("id",me.rcId);$(flashObj).appendTo(me.element);var xiSwfUrl="";var flashvars={};flashvars.bridgeName=me._flashFABridgeId;
if(options.initialDoc!==undefined)flashvars.d=options.initialDoc;if(options.streaming!==undefined)flashvars.streaming=options.streaming;flashvars.showToolbarControl=options.showToolbarControl;if(options.flashSockets===true)flashvars.NonStreamingMode="SOCKETS";else flashvars.NonStreamingMode="AJAX";var params={};params.allowfullscreen="true";params.allowFullScreenInteractive="true";if(!me.isSameOrigin(decodeURIComponent(me.options.initialDoc))&&(!me._testCORS()&&flashvars.NonStreamingMode==="AJAX"))flashvars.streaming=
true;var attributes={};attributes.id=me._flashFABridgeId;attributes.name=me._flashFABridgeId;if(typeof options.encryption!=="undefined")createHttpAjaxPartRetriever(me._flashFABridgeId,decodeURIComponent(flashvars.d),window.CoreControls.Encryption.DecryptSynchronous,options.encryption);swfobject.embedSWF(swfUrlStr,me.rcId,"100%","100%",me._flashVer,xiSwfUrl,flashvars,params,attributes,function(e){if(e.success)FABridge.addInitializationCallback(me._flashFABridgeId,function(e){me.instance=FABridge.ReaderControl.root();
var _cb=function(event){me._trigger(event.getType())};var _errorcb=function(event){console.error(event.getText())};me.instance.addEventListener("zoomChanged",_cb);me.instance.addEventListener("pageChanged",_cb);me.instance.addEventListener("displayModeChanged",_cb);me.instance.addEventListener("fitModeChanged",_cb);me.instance.addEventListener("toolModeChanged",_cb);me.instance.addEventListener("errorEvent",_errorcb);me._trigger("ready");if(me.instance.IsDocLoaded())me._trigger("documentLoaded");
else me.instance.addEventListener("documentLoaded",function(event){me._trigger("documentLoaded")})});else console.error("swfobject.embedSWF failed")})},_init:function(){},getInstance:function(){return this.instance},loadErrorPage:function(){if(typeof this.options.errorPage==="undefined")$(this.element).append("<h2 style='text-align:center;margin-top:100px'>We're sorry, an error has occurred.</h2>");else $(this.element).load(this.options.errorPage)},getSideWindowVisibility:function(){if(this.selectedType===
"html5"||this.selectedType==="html5Mobile")return this.getInstance().getShowSideWindow();else if(this.selectedType==="silverlight"||this.selectedType==="flash")return this.getInstance().GetShowSideWindow()},setSideWindowVisibility:function(value){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setShowSideWindow(value);else if(this.selectedType==="silverlight")this.getInstance().SetShowSideWindow(value);else if(this.selectedType==="flash")this.getInstance().SetShowSideWindow(value)},
getShowSideWindow:function(){return this.getSideWindowVisibility()},setShowSideWindow:function(value){this.setSideWindowVisibility(value)},getToolbarVisibility:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")console.warn("Unsupported method getToolbarVisibility");else if(this.selectedType==="silverlight")this.getInstance().getShowToolbar();else if(this.selectedType==="flash")console.warn("Unsupported method getToolbarVisibility")},setToolbarVisibility:function(isVisible){if(this.selectedType===
"html5")this.getInstance().setToolbarVisibility(isVisible);else if(this.selectedType==="silverlight")console.warn("Unsupported method setToolbarVisibility");else if(this.selectedType==="flash")this.getInstance().SetToolbarVisibility(isVisible)},getCurrentPageNumber:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")return this.getInstance().getCurrentPageNumber();else if(this.selectedType==="flash")return this.getInstance().GetCurrentPage();else if(this.selectedType==="silverlight")return this.instance.CurrentPageNumber},
setCurrentPageNumber:function(pageNumber){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setCurrentPageNumber(pageNumber);else if(this.selectedType==="flash")this.getInstance().SetCurrentPage(pageNumber);else if(this.selectedType==="silverlight")this.getInstance().CurrentPageNumber=pageNumber},getPageCount:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")return this.getInstance().getPageCount();else if(this.selectedType==="flash")return this.getInstance().GetPageCount();
else if(this.selectedType==="silverlight")return this.getInstance().PageCount},getZoomLevel:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")return this.getInstance().getZoomLevel();else if(this.selectedType==="flash")return this.getInstance().GetZoomLevel();else if(this.selectedType==="silverlight")return this.getInstance().ZoomLevel},setZoomLevel:function(zoomLevel){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setZoomLevel(zoomLevel);
else if(this.selectedType==="flash")this.getInstance().SetZoomLevel(zoomLevel);else if(this.selectedType==="silverlight")this.getInstance().ZoomLevel=zoomLevel},rotateClockwise:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().rotateClockwise();else if(this.selectedType==="flash")this.getInstance().RotateClockwise();else if(this.selectedType==="silverlight")this.getInstance().RotateClockwise()},rotateCounterClockwise:function(){if(this.selectedType===
"html5"||this.selectedType==="html5Mobile")this.getInstance().rotateCounterClockwise();else if(this.selectedType==="flash")this.getInstance().RotateCounterClockwise();else if(this.selectedType==="silverlight")this.getInstance().RotateCounterClockwise()},getLayoutMode:function(){if(this.selectedType==="html5"){var layoutMode=this.getInstance().getLayoutMode();var displayModes=CoreControls.DisplayModes;if(layoutMode===displayModes.Single)return PDFTron.WebViewer.LayoutMode.Single;else if(layoutMode===
displayModes.Continuous)return PDFTron.WebViewer.LayoutMode.Continuous;else if(layoutMode===displayModes.Facing)return PDFTron.WebViewer.LayoutMode.Facing;else if(layoutMode===displayModes.FacingContinuous)return PDFTron.WebViewer.LayoutMode.FacingContinuous;else if(layoutMode===displayModes.Cover)return PDFTron.WebViewer.LayoutMode.FacingCoverContinuous;else if(layoutMode===displayModes.CoverFacing)return PDFTron.WebViewer.LayoutMode.FacingCover;else return undefined}else if(this.selectedType===
"html5Mobile")this.getInstance().getLayoutMode();else if(this.selectedType==="silverlight"||this.selectedType==="flash"){var layoutMode=this.getInstance().GetLayoutMode();if(layoutMode==="FacingCoverContinuous")layoutMode=PDFTron.WebViewer.LayoutMode.FacingCoverContinuous;else if(layoutMode==="FacingContinuous")layoutMode=PDFTron.WebViewer.LayoutMode.FacingContinuous;return layoutMode}},setLayoutMode:function(layoutMode){if(this.selectedType==="html5"){var displayModes=CoreControls.DisplayModes;var displayMode=
displayModes.Continuous;if(layoutMode===PDFTron.WebViewer.LayoutMode.Single)displayMode=displayModes.Single;else if(layoutMode===PDFTron.WebViewer.LayoutMode.Continuous)displayMode=displayModes.Continuous;else if(layoutMode===PDFTron.WebViewer.LayoutMode.Facing)displayMode=displayModes.Facing;else if(layoutMode===PDFTron.WebViewer.LayoutMode.FacingContinuous)displayMode=displayModes.FacingContinuous;else if(layoutMode===PDFTron.WebViewer.LayoutMode.FacingCover)displayMode=displayModes.CoverFacing;
else if(layoutMode===PDFTron.WebViewer.LayoutMode.FacingCoverContinuous)displayMode=displayModes.Cover;this.getInstance().setLayoutMode(displayMode)}else if(this.selectedType==="html5Mobile")this.getInstance().setLayoutMode(layoutMode);else if(this.selectedType==="silverlight"||this.selectedType==="flash")if(layoutMode===PDFTron.WebViewer.LayoutMode.FacingCoverContinuous)this.getInstance().SetLayoutMode("FacingCoverContinuous");else this.getInstance().SetLayoutMode(layoutMode)},getToolMode:function(){if(this.selectedType===
"html5")return this.getInstance().getToolMode();else if(this.selectedType==="html5Mobile")return this.getInstance().getToolMode();else if(this.selectedType==="silverlight"||this.selectedType==="flash")return this.getInstance().GetToolMode()},setToolMode:function(toolMode){if(this.selectedType==="html5")this.getInstance().setToolMode(toolMode);else if(this.selectedType==="html5Mobile")this.getInstance().setToolMode(toolMode);else if(this.selectedType==="silverlight"||this.selectedType==="flash")this.getInstance().SetToolMode(toolMode)},
fitWidth:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().fitWidth();else if(this.selectedType==="flash")this.getInstance().FitWidth();else if(this.selectedType==="silverlight")this.getInstance().FitWidth()},fitHeight:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().fitHeight();else if(this.selectedType==="flash")console.warn("Unsupported method fitHeight.");else if(this.selectedType==="silverlight")this.getInstance().FitHeight()},
fitPage:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().fitPage();else if(this.selectedType==="flash")this.getInstance().FitPage();else if(this.selectedType==="silverlight")this.getInstance().FitPage()},getFitMode:function(){if(this.selectedType==="html5"){var fitMode=this.getInstance().getFitMode();var FitModeEnums=this.getInstance().docViewer.FitMode;switch(fitMode){case FitModeEnums.FitWidth:return PDFTron.WebViewer.FitMode.FitWidth;case FitModeEnums.FitHeight:return PDFTron.WebViewer.FitMode.FitHeight;
case FitModeEnums.FitPage:return PDFTron.WebViewer.FitMode.FitPage;case FitModeEnums.Zoom:return PDFTron.WebViewer.FitMode.Zoom;default:console.warn("Unsupported method getFitMode")}}else if(this.selectedType==="silverlight")return this.getInstance().getFitMode();else if(this.selectedType==="flash"){var camel=this.getInstance().GetFitMode();return camel.charAt(0).toUpperCase()+camel.slice(1)}else console.warn("Unsupported method getFitMode")},setFitMode:function(fitMode){if(fitMode===PDFTron.WebViewer.FitMode.FitWidth)this.fitWidth();
else if(fitMode===PDFTron.WebViewer.FitMode.FitHeight)if(this.selectedType==="flash")this.fitPage();else this.fitHeight();else if(fitMode===PDFTron.WebViewer.FitMode.FitPage)this.fitPage();else if(fitMode===PDFTron.WebViewer.FitMode.Zoom)this.zoom();else console.warn("Unsupported fit mode: "+fitMode)},zoom:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().fitZoom();else if(this.selectedType==="flash")this.getInstance().FitZoom();else if(this.selectedType===
"silverlight")this.getInstance().Zoom()},goToFirstPage:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().goToFirstPage();else if(this.selectedType==="flash")this.getInstance().GoToFirstPage();else if(this.selectedType==="silverlight")this.getInstance().CurrentPageNumber=1},goToLastPage:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().goToLastPage();else if(this.selectedType==="flash")this.getInstance().GoToLastPage();
else if(this.selectedType==="silverlight"){var totalPages=this.getInstance().PageCount;this.getInstance().CurrentPageNumber=totalPages}},goToNextPage:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().goToNextPage();else if(this.selectedType==="flash")this.getInstance().GoToNextPage();else if(this.selectedType==="silverlight"){var currentPage=this.getInstance().CurrentPageNumber;if(currentPage<=0)return;currentPage=currentPage+1;this.getInstance().CurrentPageNumber=
currentPage}},goToPrevPage:function(){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().goToPrevPage();else if(this.selectedType==="flash")this.getInstance().GoToPrevPage();else if(this.selectedType==="silverlight"){var currentPage=this.getInstance().CurrentPageNumber;if(currentPage<=1)return;currentPage=currentPage-1;this.getInstance().CurrentPageNumber=currentPage}},loadDocument:function(url){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().loadDocument(this._correctRelativePath(url),
this.options.streaming);else this.getInstance().LoadDocument(this._correctRelativePath(url),this.options.streaming)},searchText:function(pattern,searchModes){var mode=0;var modes=searchModes;if(typeof modes==="string")modes=searchModes.split(",");if(typeof searchModes!=="undefined")for(var i=0;i<modes.length;i++)if(searchModes[i]==="CaseSensitive")mode+=1;else if(searchModes[i]==="WholeWord")mode+=2;else if(searchModes[i]==="SearchUp")mode+=4;else if(searchModes[i]==="PageStop")mode+=8;else if(searchModes[i]===
"ProvideQuads")mode+=16;else if(searchModes[i]==="AmbientString")mode+=32;if(this.selectedType==="html5"||this.selectedType==="html5Mobile")if(typeof searchModes==="undefined")this.getInstance().searchText(pattern);else this.getInstance().searchText(pattern,mode);else if(this.selectedType==="silverlight"){var modeString=$.isArray(searchModes)?searchModes.join(","):searchModes;if(typeof modeString==="undefined")modeString="";this.getInstance().SearchText(pattern,modeString)}else if(this.selectedType===
"flash")if(typeof searchModes==="undefined")this.getInstance().SearchText(pattern,0);else this.getInstance().SearchText(pattern,mode)},setOnPageChangeCallback:function(callback){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setOnPageChangeCallback(callback);else if(this.selectedType==="flash")console.warn("Unsupported method setOnPageChangeCallback");else if(this.selectedType==="silverlight")this.getInstance().OnPageChangeCallback=callback},setOnPageZoomCallback:function(callback){if(this.selectedType===
"html5"||this.selectedType==="html5Mobile")this.getInstance().setOnPageZoomCallback(callback);else if(this.selectedType==="flash")console.warn("Unsupported method setOnPageZoomCallback");else if(this.selectedType==="silverlight")this.getInstance().OnPageZoomCallback=callback},setAnnotationUser:function(username){if(this.selectedType==="html5"||(this.selectedType==="html5Mobile"||this.selectedType==="silverlight"))this.getInstance().setAnnotationUser(username);else console.warn("Unsupported method setAnnotationUser")},
setAdminUser:function(isAdminUser){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setAdminUser(isAdminUser);else if(this.selectedType==="flash")console.warn("Unsupported method setAdminUser");else if(this.selectedType==="silverlight")console.warn("Unsupported method setAdminUser");else console.warn("Unsupported method setAdminUser")},setReadOnly:function(isReadOnly){if(this.selectedType==="html5"||this.selectedType==="html5Mobile")this.getInstance().setReadOnly(isReadOnly);
else if(this.selectedType==="flash")console.warn("Unsupported method setReadOnly");else console.warn("Unsupported method setReadOnly")},openPrintDialog:function(title,body,okstring,cancelstring){if(this.selectedType==="html5"||this.selectedType==="html5Mobile"){var sl_print_container=$("#sl-print");if(sl_print_container.length>0){$(sl_print_container).css("z-index","999");this._webviewerprint.getInstance().openPrintDialog(title,body,okstring,cancelstring);return}var sl_print_container=$('<div id="sl-print"></div>').appendTo("body");
sl_print_container.css({width:"400px",background:"white","height":"150px","text-align":"center","z-index":-10});var clonedOptions=jQuery.extend(true,{},this.options);clonedOptions.type="silverlight";clonedOptions.silverlightPath="silverlight/ReaderControl.xap";clonedOptions.nogui=true;clonedOptions.autoCreate=true;clonedOptions.enableAnnotations=false;clonedOptions.background="transparent";clonedOptions.windowless="transparent";clonedOptions.initialDoc=decodeURIComponent(this.options.initialDoc);
var _webviewerprint=new PDFTron.WebViewer(clonedOptions,sl_print_container);this._webviewerprint=_webviewerprint;$(sl_print_container).on("documentLoaded",function(){$(sl_print_container).css("z-index",999);_webviewerprint.instance.onUIEvent=function(sender3,args3){if(args3.name==="PrintDialogClosing"){$(sl_print_container).css("z-index","-1");$(sl_print_container).trigger("closing")}if(args3.name==="PrintStarted");};_webviewerprint.openPrintDialog(title,body,okstring,cancelstring)})}else if(this.selectedType===
"flash")console.warn("Unsupported method print");else if(this.selectedType==="silverlight")this.getInstance().openPrintDialog(title,body,okstring,cancelstring)},downloadXodDocument:function(){var url=decodeURIComponent(this.options.initialDoc);window.open(url)},startPrintJob:function(pages){if(this.selectedType==="html5")this.getInstance().startPrintJob(pages);else console.warn("Unsupported method startPrintJob")},endPrintJob:function(){if(this.selectedType==="html5")this.getInstance().endPrintJob();
else console.warn("Unsupported method endPrintJob")},getViewerType:function(){return this.selectedType},option:function(key,value){if($.isPlainObject(key))this.options=$.extend(true,this.options,key);else if(key&&typeof value==="undefined")return this.options[key];else this.options[key]=value;return this},_correctRelativePath:function(path){var curdir=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"));var pattern=/^(https?:\/\/|file:\/\/|\/|%2F)/i;return pattern.test(path)?
path:curdir+"/"+path},_testSilverlight:function(v){try{return Silverlight&&Silverlight.isInstalled(v)}catch(e){console.warn(e);return false}},_testHTML5:function(){try{var c=document.createElement("canvas");return c&&c.getContext("2d")}catch(e){return false}},_supports:function(type){if(type===this.selectedType)return true;for(var i=1;i<arguments.length;i++)if(arguments[i]===this.selectedType)return true;return false},_testCORS:function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest},
isMobileDevice:function(){return navigator.userAgent.match(/Android/i)||(navigator.userAgent.match(/webOS/i)||(navigator.userAgent.match(/iPhone/i)||(navigator.userAgent.match(/iPod/i)||(navigator.userAgent.match(/iPad/i)||(navigator.userAgent.match(/Touch/i)||(navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Silk/i)))))))},isSameOrigin:function(url){var loc=window.location;var a=document.createElement("a");a.href=url;if(a.host==="")a.href=a.href;var locPort=window.location.port;
var aPort=a.port;if(a.protocol==="http:"){aPort=aPort||"80";locPort=locPort||"80"}else if(a.protocol==="https:"){aPort=aPort||"443";locPort=locPort||"443"}return a.hostname===loc.hostname&&(a.protocol===loc.protocol&&aPort===locPort)},_testFlash:function(v){return swfobject.hasFlashPlayerVersion(v)}};if(typeof $.widget==="function")$.widget("PDFTron.webViewer",PDFTron.WebViewer.prototype);
PDFTron.WebViewer.LayoutMode={Single:"SinglePage",Continuous:"Continuous",Facing:"Facing",FacingContinuous:"FacingContinuous",FacingCover:"FacingCover",FacingCoverContinuous:"CoverContinuous"};
PDFTron.WebViewer.ToolMode={Pan:"Pan",TextSelect:"TextSelect",PanAndAnnotationEdit:"PanAndAnnotationEdit",AnnotationEdit:"AnnotationEdit",AnnotationCreateCustom:"AnnotationCreateCustom",AnnotationCreateEllipse:"AnnotationCreateEllipse",AnnotationCreateFreeHand:"AnnotationCreateFreeHand",AnnotationCreateLine:"AnnotationCreateLine",AnnotationCreateRectangle:"AnnotationCreateRectangle",AnnotationCreateSticky:"AnnotationCreateSticky",AnnotationCreateTextHighlight:"AnnotationCreateTextHighlight",AnnotationCreateTextStrikeout:"AnnotationCreateTextStrikeout",
AnnotationCreateTextUnderline:"AnnotationCreateTextUnderline",AnnotationCreatePolyline:"AnnotationCreatePolyline",AnnotationCreatePolygon:"AnnotationCreatePolygon",AnnotationCreateCallout:"AnnotationCreateCallout"};
PDFTron.WebViewer.Options={type:"html5,silverlight,html5Mobile,flash",path:"",html5Path:"html5/ReaderControl.html",html5MobilePath:"html5/MobileReaderControl.html",silverlightPath:"silverlight/ReaderControl.xap",flashPath:"flash/ReaderControl.swf",autoCreate:true,initialDoc:undefined,cloudApiId:undefined,enableAnnotations:false,enableOfflineMode:false,startOffline:false,enableReadOnlyMode:false,errorPage:undefined,serverUrl:undefined,documentId:undefined,streaming:false,config:undefined,mobileRedirect:true,
encryption:undefined,showToolbarControl:true,showSilverlightControls:true,flashSockets:false,silverlightObjectParams:{},html5Options:{},html5MobileOptions:{},silverlightOptions:{},flashOptions:{}};PDFTron.WebViewer.FitMode={FitWidth:"FitWidth",FitHeight:"FitHeight",FitPage:"FitPage",Zoom:"Zoom"};PDFTron.WebViewer.SearchMode={CaseSensitive:1,WholeWord:2,SearchUp:4,PageStop:8,ProvideQuads:16,AmbientString:32};
PDFTron.WebViewer.User=function(username,isAdmin,isReadOnly){this.username=username;if(typeof isAdmin!=="undefined")this.isAdmin=isAdmin;else this.isAdmin=false;if(typeof isReadOnly!=="undefined")this.isReadOnly=isReadOnly;else this.isReadOnly=false};if(!window.Silverlight)window.Silverlight={};Silverlight._silverlightCount=0;Silverlight.__onSilverlightInstalledCalled=false;Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";Silverlight.__installationEventFired=false;Silverlight.onGetSilverlight=null;Silverlight.onSilverlightInstalled=function(){window.location.reload(false)};
Silverlight.isInstalled=function(b){if(b==undefined)b=null;var a=false,m=null;try{var i=null,j=false;if(window.ActiveXObject)try{i=new ActiveXObject("AgControl.AgControl");if(b===null)a=true;else if(i.IsVersionSupported(b))a=true;i=null}catch(l){j=true}else j=true;if(j){var k=navigator.plugins["Silverlight Plug-In"];if(k)if(b===null)a=true;else{var h=k.description;if(h==="1.0.30226.2")h="2.0.30226.2";var c=h.split(".");while(c.length>3)c.pop();while(c.length<4)c.push(0);var e=b.split(".");while(e.length>
4)e.pop();var d,g,f=0;do{d=parseInt(e[f]);g=parseInt(c[f]);f++}while(f<e.length&&d===g);if(d<=g&&!isNaN(d))a=true}}}catch(l){a=false}return a};
Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(a){}if(Silverlight.isInstalled(null)&&!Silverlight.__onSilverlightInstalledCalled){Silverlight.onSilverlightInstalled();Silverlight.__onSilverlightInstalledCalled=true}else setTimeout(Silverlight.WaitForInstallCompletion,3E3)}};
Silverlight.__startup=function(){navigator.plugins.refresh();Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null);if(!Silverlight.isBrowserRestartRequired){Silverlight.WaitForInstallCompletion();if(!Silverlight.__installationEventFired){Silverlight.onInstallRequired();Silverlight.__installationEventFired=true}}else if(window.navigator.mimeTypes){var b=navigator.mimeTypes["application/x-silverlight-2"],c=navigator.mimeTypes["application/x-silverlight-2-b2"],d=navigator.mimeTypes["application/x-silverlight-2-b1"],
a=d;if(c)a=c;if(!b&&(d||c)){if(!Silverlight.__installationEventFired){Silverlight.onUpgradeRequired();Silverlight.__installationEventFired=true}}else if(b&&a)if(b.enabledPlugin&&a.enabledPlugin)if(b.enabledPlugin.description!=a.enabledPlugin.description)if(!Silverlight.__installationEventFired){Silverlight.onRestartRequired();Silverlight.__installationEventFired=true}}if(!Silverlight.disableAutoStartup)if(window.removeEventListener)window.removeEventListener("load",Silverlight.__startup,false);else window.detachEvent("onload",
Silverlight.__startup)};if(!Silverlight.disableAutoStartup)if(window.addEventListener)window.addEventListener("load",Silverlight.__startup,false);else window.attachEvent("onload",Silverlight.__startup);
Silverlight.createObject=function(m,f,e,k,l,h,j){var d={},a=k,c=l;d.version=a.version;a.source=m;d.alt=a.alt;if(h)a.initParams=h;if(a.isWindowless&&!a.windowless)a.windowless=a.isWindowless;if(a.framerate&&!a.maxFramerate)a.maxFramerate=a.framerate;if(e&&!a.id)a.id=e;delete a.ignoreBrowserVer;delete a.inplaceInstallPrompt;delete a.version;delete a.isWindowless;delete a.framerate;delete a.data;delete a.src;delete a.alt;if(Silverlight.isInstalled(d.version)){for(var b in c)if(c[b]){if(b=="onLoad"&&
(typeof c[b]=="function"&&c[b].length!=1)){var i=c[b];c[b]=function(a){return i(document.getElementById(e),j,a)}}var g=Silverlight.__getHandlerName(c[b]);if(g!=null){a[b]=g;c[b]=null}else throw"typeof events."+b+" must be 'function' or 'string'";}slPluginHTML=Silverlight.buildHTML(a)}else slPluginHTML=Silverlight.buildPromptHTML(d);if(f)f.innerHTML=slPluginHTML;else return slPluginHTML};
Silverlight.buildHTML=function(a){var b=[];b.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"');if(a.id!=null)b.push(' id="'+Silverlight.HtmlAttributeEncode(a.id)+'"');if(a.width!=null)b.push(' width="'+a.width+'"');if(a.height!=null)b.push(' height="'+a.height+'"');b.push(" >");delete a.id;delete a.width;delete a.height;for(var c in a)if(a[c])b.push('<param name="'+Silverlight.HtmlAttributeEncode(c)+'" value="'+Silverlight.HtmlAttributeEncode(a[c])+'" />');b.push("</object>");
return b.join("")};Silverlight.createObjectEx=function(b){var a=b,c=Silverlight.createObject(a.source,a.parentElement,a.id,a.properties,a.events,a.initParams,a.context);if(a.parentElement==null)return c};
Silverlight.buildPromptHTML=function(b){var a="",d=Silverlight.fwlinkRoot,c=b.version;if(b.alt)a=b.alt;else{if(!c)c="";a="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>";a=a.replace("{1}",c);a=a.replace("{2}",d+"161376")}return a};
Silverlight.getSilverlight=function(e){if(Silverlight.onGetSilverlight)Silverlight.onGetSilverlight();var b="",a=String(e).split(".");if(a.length>1){var c=parseInt(a[0]);if(isNaN(c)||c<2)b="1.0";else b=a[0]+"."+a[1]}var d="";if(b.match(/^\d+\056\d+$/))d="&v="+b;Silverlight.followFWLink("149156"+d)};Silverlight.followFWLink=function(a){top.location=Silverlight.fwlinkRoot+String(a)};
Silverlight.HtmlAttributeEncode=function(c){var a,b="";if(c==null)return null;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);if(a>96&&a<123||(a>64&&a<91||(a>43&&(a<58&&a!=47)||a==95)))b=b+String.fromCharCode(a);else b=b+"&#"+a+";"}return b};
Silverlight.default_error_handler=function(e,b){var d,c=b.ErrorType;d=b.ErrorCode;var a="\nSilverlight error message     \n";a+="ErrorCode: "+d+"\n";a+="ErrorType: "+c+"       \n";a+="Message: "+b.ErrorMessage+"     \n";if(c=="ParserError"){a+="XamlFile: "+b.xamlFile+"     \n";a+="Line: "+b.lineNumber+"     \n";a+="Position: "+b.charPosition+"     \n"}else if(c=="RuntimeError"){if(b.lineNumber!=0){a+="Line: "+b.lineNumber+"     \n";a+="Position: "+b.charPosition+"     \n"}a+="MethodName: "+b.methodName+
"     \n"}alert(a)};Silverlight.__cleanup=function(){for(var a=Silverlight._silverlightCount-1;a>=0;a--)window["__slEvent"+a]=null;Silverlight._silverlightCount=0;if(window.removeEventListener)window.removeEventListener("unload",Silverlight.__cleanup,false);else window.detachEvent("onunload",Silverlight.__cleanup)};
Silverlight.__getHandlerName=function(b){var a="";if(typeof b=="string")a=b;else if(typeof b=="function"){if(Silverlight._silverlightCount==0)if(window.addEventListener)window.addEventListener("unload",Silverlight.__cleanup,false);else window.attachEvent("onunload",Silverlight.__cleanup);var c=Silverlight._silverlightCount++;a="__slEvent"+c;window[a]=b}else a=null;return a};Silverlight.onRequiredVersionAvailable=function(){};Silverlight.onRestartRequired=function(){};
Silverlight.onUpgradeRequired=function(){};Silverlight.onInstallRequired=function(){};
Silverlight.IsVersionAvailableOnError=function(d,a){var b=false;try{if(a.ErrorCode==8001&&!Silverlight.__installationEventFired){Silverlight.onUpgradeRequired();Silverlight.__installationEventFired=true}else if(a.ErrorCode==8002&&!Silverlight.__installationEventFired){Silverlight.onRestartRequired();Silverlight.__installationEventFired=true}else if(a.ErrorCode==5014||a.ErrorCode==2106){if(Silverlight.__verifySilverlight2UpgradeSuccess(a.getHost()))b=true}else b=true}catch(c){}return b};
Silverlight.IsVersionAvailableOnLoad=function(b){var a=false;try{if(Silverlight.__verifySilverlight2UpgradeSuccess(b.getHost()))a=true}catch(c){}return a};
Silverlight.__verifySilverlight2UpgradeSuccess=function(d){var c=false,b="4.0.50401",a=null;try{if(d.IsVersionSupported(b+".99")){a=Silverlight.onRequiredVersionAvailable;c=true}else if(d.IsVersionSupported(b+".0"))a=Silverlight.onRestartRequired;else a=Silverlight.onUpgradeRequired;if(a&&!Silverlight.__installationEventFired){a();Silverlight.__installationEventFired=true}}catch(e){}return c};browserScrolling=true;function allowBrowserScroll(value){browserScrolling=value}function swfHandle(delta){if(!browserScrolling)return false;return true}function swfWheel(event){var delta=0;if(!event)event=window.event;if(event.wheelDelta){delta=event.wheelDelta/120;if(window.opera)delta=-delta}else if(event.detail)delta=-event.detail/3;if(delta)swfHandle(delta);if(!browserScrolling){if(event.preventDefault)event.preventDefault();event.returnValue=false}}
if(window.addEventListener)window.addEventListener("DOMMouseScroll",swfWheel,false);window.onmousewheel=document.onmousewheel=swfWheel;allowBrowserScroll(true);
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=
false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&(typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF),u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\v1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==
OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&(nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);
if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3)return;if(typeof doc.readyState!=UNDEF&&doc.readyState=="complete"||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))callDomLoadFunctions();if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF)doc.addEventListener("DOMContentLoaded",
callDomLoadFunctions,false);if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee);callDomLoadFunctions()}});if(win==top)(function(){if(isDomLoaded)return;try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}if(ua.wk)(function(){if(isDomLoaded)return;if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})();
addLoadEvent(callDomLoadFunctions)}}();function callDomLoadFunctions(){if(isDomLoaded)return;try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++)domLoadFnArr[i]()}function addDomLoadEvent(fn){if(isDomLoaded)fn();else domLoadFnArr[domLoadFnArr.length]=fn}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF)win.addEventListener("load",fn,false);else if(typeof doc.addEventListener!=
UNDEF)doc.addEventListener("load",fn,false);else if(typeof win.attachEvent!=UNDEF)addListener(win,"onload",fn);else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else win.onload=fn}function main(){if(plugin)testPlayerVersion();else matchVersions()}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=
UNDEF){var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}else if(counter<10){counter++;setTimeout(arguments.callee,10);return}b.removeChild(o);t=null;matchVersions()})()}else matchVersions()}function matchVersions(){var rl=regObjArr.length;if(rl>0)for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj)if(hasPlayerVersion(regObjArr[i].swfVersion)&&
!(ua.wk&&ua.wk<312)){setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj)}}else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class"))att.styleclass=obj.getAttribute("class");if(obj.getAttribute("align"))att.align=obj.getAttribute("align");var par={};var p=obj.getElementsByTagName("param");var pl=p.length;
for(var j=0;j<pl;j++)if(p[j].getAttribute("name").toLowerCase()!="movie")par[p[j].getAttribute("name")]=p[j].getAttribute("value");showExpressInstall(att,par,id,cb)}else{displayAltContent(obj);if(cb)cb(cbObj)}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o}cb(cbObj)}}}}function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT")if(typeof o.SetVariable!=UNDEF)r=o;else{var n=
o.getElementsByTagName(OBJECT)[0];if(n)r=n}return r}function canExpressInstall(){return!isExpressInstallActive&&(hasPlayerVersion("6.0.65")&&((ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)))}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null}else{storedAltContent=
obj;storedAltContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310)att.width="310";if(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137)att.height="137";doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=
UNDEF)par.flashvars+="&"+fv;else par.flashvars=fv;if(ua.ie&&(ua.win&&obj.readyState!=4)){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function(){if(obj.readyState==4)obj.parentNode.removeChild(obj);else setTimeout(arguments.callee,10)})()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&(ua.win&&obj.readyState!=4)){var el=createElement("div");
obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function(){if(obj.readyState==4)obj.parentNode.removeChild(obj);else setTimeout(arguments.callee,10)})()}else obj.parentNode.replaceChild(abstractAltContent(obj),obj)}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie)ac.innerHTML=obj.innerHTML;else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;
for(var i=0;i<cl;i++)if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8))ac.appendChild(c[i].cloneNode(true))}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312)return r;if(el){if(typeof attObj.id==UNDEF)attObj.id=id;if(ua.ie&&ua.win){var att="";for(var i in attObj)if(attObj[i]!=Object.prototype[i])if(i.toLowerCase()=="data")parObj.movie=attObj[i];else if(i.toLowerCase()=="styleclass")att+=' class="'+attObj[i]+'"';else if(i.toLowerCase()!=
"classid")att+=" "+i+'="'+attObj[i]+'"';var par="";for(var j in parObj)if(parObj[j]!=Object.prototype[j])par+='<param name="'+j+'" value="'+parObj[j]+'" />';el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj)if(attObj[m]!=Object.prototype[m])if(m.toLowerCase()=="styleclass")o.setAttribute("class",
attObj[m]);else if(m.toLowerCase()!="classid")o.setAttribute(m,attObj[m]);for(var n in parObj)if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie")createObjParam(o,n,parObj[n]);el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT")if(ua.ie&&ua.win){obj.style.display="none";
(function(){if(obj.readyState==4)removeObjectInIE(id);else setTimeout(arguments.callee,10)})()}else obj.parentNode.removeChild(obj)}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj)if(typeof obj[i]=="function")obj[i]=null;obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,
fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&(pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac)return;var h=doc.getElementsByTagName("head")[0];if(!h)return;var m=media&&typeof media=="string"?media:"screen";if(newStyle){dynamicStylesheet=null;
dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&(ua.win&&(typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0)))dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1];dynamicStylesheetMedia=m}if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT)dynamicStylesheet.addRule(sel,decl)}else if(dynamicStylesheet&&
typeof doc.createTextNode!=UNDEF)dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}function setVisibility(id,isVisible){if(!autoHideShow)return;var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id))getElementById(id).style.visibility=v;else createCSS("#"+id,"visibility:"+v)}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&
ua.win)window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++)listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2]);var il=objIdArr.length;for(var j=0;j<il;j++)removeSWF(objIdArr[j]);for(var k in ua)ua[k]=null;ua=null;for(var l in swfobject)swfobject[l]=null;swfobject=null})}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&(objectIdStr&&swfVersionStr)){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=
swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)}else if(callbackFn)callbackFn({success:false,id:objectIdStr})},getObjectById:function(objectIdStr){if(ua.w3)return getObjectById(objectIdStr)},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr};if(ua.w3&&(!(ua.wk&&ua.wk<312)&&
(swfUrlStr&&(replaceElemIdStr&&(widthStr&&(heightStr&&swfVersionStr)))))){setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT)for(var i in attObj)att[i]=attObj[i];att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT)for(var j in parObj)par[j]=parObj[j];if(flashvarsObj&&typeof flashvarsObj===OBJECT)for(var k in flashvarsObj)if(typeof par.flashvars!=UNDEF)par.flashvars+=
"&"+k+"="+flashvarsObj[k];else par.flashvars=k+"="+flashvarsObj[k];if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr)setVisibility(replaceElemIdStr,true);callbackObj.success=true;callbackObj.ref=obj}else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else setVisibility(replaceElemIdStr,true);if(callbackFn)callbackFn(callbackObj)})}else if(callbackFn)callbackFn(callbackObj)},
switchOffAutoHideShow:function(){autoHideShow=false},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3)return createSWF(attObj,parObj,replaceElemIdStr);else return undefined},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall())showExpressInstall(att,par,replaceElemIdStr,callbackFn)},removeSWF:function(objElemIdStr){if(ua.w3)removeSWF(objElemIdStr)},
createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3)createCSS(selStr,declStr,mediaStr,newStyleBoolean)},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q))q=q.split("?")[1];if(param==null)return urlEncodeIfNecessary(q);var pairs=q.split("&");for(var i=0;i<pairs.length;i++)if(pairs[i].substring(0,pairs[i].indexOf("="))==param)return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win)storedAltContent.style.display="block"}if(storedCallbackFn)storedCallbackFn(storedCallbackObj)}isExpressInstallActive=false}}}}();function FABridge(target,bridgeName){this.target=target;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=bridgeName;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};
FABridge.argsToArray=function(args){var result=[];for(var i=0;i<args.length;i++)result[i]=args[i];return result};function instanceFactory(objID){this.fb_instance_id=objID;return this}function FABridge__invokeJSFunction(args){var funcID=args[0];var throughArgs=args.concat();throughArgs.shift();var bridge=FABridge.extractBridgeFromID(funcID);return bridge.invokeLocalFunction(funcID,throughArgs)}
FABridge.addInitializationCallback=function(bridgeName,callback){var inst=FABridge.instances[bridgeName];if(inst!=undefined){callback.call(inst);return}var callbackList=FABridge.initCallbacks[bridgeName];if(callbackList==null)FABridge.initCallbacks[bridgeName]=callbackList=[];callbackList.push(callback)};
function FABridge__bridgeInitialized(bridgeName){var objects=document.getElementsByTagName("object");var ol=objects.length;var activeObjects=[];if(ol>0)for(var i=0;i<ol;i++)if(typeof objects[i].SetVariable!="undefined")activeObjects[activeObjects.length]=objects[i];var embeds=document.getElementsByTagName("embed");var el=embeds.length;var activeEmbeds=[];if(el>0)for(var j=0;j<el;j++)if(typeof embeds[j].SetVariable!="undefined")activeEmbeds[activeEmbeds.length]=embeds[j];var aol=activeObjects.length;
var ael=activeEmbeds.length;var searchStr="bridgeName="+bridgeName;if(aol==1&&!ael||aol==1&&ael==1)FABridge.attachBridge(activeObjects[0],bridgeName);else if(ael==1&&!aol)FABridge.attachBridge(activeEmbeds[0],bridgeName);else{var flash_found=false;if(aol>1)for(var k=0;k<aol;k++){var params=activeObjects[k].childNodes;for(var l=0;l<params.length;l++){var param=params[l];if(param.nodeType==1&&(param.tagName.toLowerCase()=="param"&&(param["name"].toLowerCase()=="flashvars"&&param["value"].indexOf(searchStr)>=
0))){FABridge.attachBridge(activeObjects[k],bridgeName);flash_found=true;break}}if(flash_found)break}if(!flash_found&&ael>1)for(var m=0;m<ael;m++){var flashVars=activeEmbeds[m].attributes.getNamedItem("flashVars").nodeValue;if(flashVars.indexOf(searchStr)>=0){FABridge.attachBridge(activeEmbeds[m],bridgeName);break}}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;FABridge.extractBridgeFromID=function(id){var bridgeID=id>>16;return FABridge.idMap[bridgeID]};
FABridge.attachBridge=function(instance,bridgeName){var newBridgeInstance=new FABridge(instance,bridgeName);FABridge[bridgeName]=newBridgeInstance;var callbacks=FABridge.initCallbacks[bridgeName];if(callbacks==null)return;for(var i=0;i<callbacks.length;i++)callbacks[i].call(newBridgeInstance);delete FABridge.initCallbacks[bridgeName]};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};
FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(value){if(typeof value!="object")return false;else{var ret=this.target.releaseNamedASObject(value.fb_instance_id);return ret}},create:function(className){return this.deserialize(this.target.create(className))},makeID:function(token){return(this.bridgeID<<16)+token},getPropertyFromAS:function(objRef,propName){if(FABridge.refCount>
0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.getPropFromAS(objRef,propName);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(objRef,propName,value){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{FABridge.refCount++;retVal=this.target.setPropInAS(objRef,propName,this.serialize(value));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASFunction:function(funcID,args){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.invokeASFunction(funcID,this.serialize(args));retVal=this.handleError(retVal);
FABridge.refCount--;return retVal}},callASMethod:function(objID,funcName,args){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;args=this.serialize(args);retVal=this.target.invokeASMethod(objID,funcName,args);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(funcID,args){var result;
var func=this.localFunctionCache[funcID];if(func!=undefined)result=this.serialize(func.apply(null,this.deserialize(args)));return result},getTypeFromName:function(objTypeName){return this.remoteTypeCache[objTypeName]},createProxy:function(objID,typeName){var objType=this.getTypeFromName(typeName);instanceFactory.prototype=objType;var instance=new instanceFactory(objID);this.remoteInstanceCache[objID]=instance;return instance},getProxy:function(objID){return this.remoteInstanceCache[objID]},addTypeDataToCache:function(typeData){newType=
new ASProxy(this,typeData.name);var accessors=typeData.accessors;for(var i=0;i<accessors.length;i++)this.addPropertyToType(newType,accessors[i]);var methods=typeData.methods;for(var i=0;i<methods.length;i++)if(FABridge.blockedMethods[methods[i]]==undefined)this.addMethodToType(newType,methods[i]);this.remoteTypeCache[newType.typeName]=newType;return newType},addPropertyToType:function(ty,propName){var c=propName.charAt(0);var setterName;var getterName;if(c>="a"&&c<="z"){getterName="get"+c.toUpperCase()+
propName.substr(1);setterName="set"+c.toUpperCase()+propName.substr(1)}else{getterName="get"+propName;setterName="set"+propName}ty[setterName]=function(val){this.bridge.setPropertyInAS(this.fb_instance_id,propName,val)};ty[getterName]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,propName))}},addMethodToType:function(ty,methodName){ty[methodName]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,methodName,FABridge.argsToArray(arguments)))}},
getFunctionProxy:function(funcID){var bridge=this;if(this.remoteFunctionCache[funcID]==null)this.remoteFunctionCache[funcID]=function(){bridge.callASFunction(funcID,FABridge.argsToArray(arguments))};return this.remoteFunctionCache[funcID]},getFunctionID:function(func){if(func.__bridge_id__==undefined){func.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[func.__bridge_id__]=func}return func.__bridge_id__},serialize:function(value){var result={};var t=typeof value;if(t=="number"||
(t=="string"||(t=="boolean"||(t==null||t==undefined))))result=value;else if(value instanceof Array){result=[];for(var i=0;i<value.length;i++)result[i]=this.serialize(value[i])}else if(t=="function"){result.type=FABridge.TYPE_JSFUNCTION;result.value=this.getFunctionID(value)}else if(value instanceof ASProxy){result.type=FABridge.TYPE_ASINSTANCE;result.value=value.fb_instance_id}else{result.type=FABridge.TYPE_ANONYMOUS;result.value=value}return result},deserialize:function(packedValue){var result;var t=
typeof packedValue;if(t=="number"||(t=="string"||(t=="boolean"||(packedValue==null||packedValue==undefined))))result=this.handleError(packedValue);else if(packedValue instanceof Array){result=[];for(var i=0;i<packedValue.length;i++)result[i]=this.deserialize(packedValue[i])}else if(t=="object"){for(var i=0;i<packedValue.newTypes.length;i++)this.addTypeDataToCache(packedValue.newTypes[i]);for(var aRefID in packedValue.newRefs)this.createProxy(aRefID,packedValue.newRefs[aRefID]);if(packedValue.type==
FABridge.TYPE_PRIMITIVE)result=packedValue.value;else if(packedValue.type==FABridge.TYPE_ASFUNCTION)result=this.getFunctionProxy(packedValue.value);else if(packedValue.type==FABridge.TYPE_ASINSTANCE)result=this.getProxy(packedValue.value);else if(packedValue.type==FABridge.TYPE_ANONYMOUS)result=packedValue.value}return result},addRef:function(obj){this.target.incRef(obj.fb_instance_id)},release:function(obj){this.target.releaseRef(obj.fb_instance_id)},handleError:function(value){if(typeof value==
"string"&&value.indexOf("__FLASHERROR")==0){var myErrorMessage=value.split("||");if(FABridge.refCount>0)FABridge.refCount--;throw new Error(myErrorMessage[1]);return value}else return value}};ASProxy=function(bridge,typeName){this.bridge=bridge;this.typeName=typeName;return this};
ASProxy.prototype={get:function(propName){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,propName))},set:function(propName,value){this.bridge.setPropertyInAS(this.fb_instance_id,propName,value)},call:function(funcName,args){this.bridge.callASMethod(this.fb_instance_id,funcName,args)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};var HttpAjaxPartRetriever=function(id,url,decrypt,decrypt_options){this._url=url;this._id=id;this._flash=null;this._pending=null;this._decrypt=decrypt;this._decrypt_options=decrypt_options};HttpAjaxPartRetriever.prototype.requestOffset=function(rid,url,offset,part){if(url===this._url)this.makeRequest(rid,{"start":offset},part)};HttpAjaxPartRetriever.prototype.requestRange=function(rid,url,start,end,part){if(url===this._url)this.makeRequest(rid,{"start":start,"stop":end},part)};
HttpAjaxPartRetriever.prototype.makeRequest=function(rid,range,part){var request=this.createRequest(range,false);request._xod_rid=rid;request._retriever=this;if(this._flash===null)this._flash=document.getElementById(this._id);if(part)request._part=part;request.onreadystatechange=function(){if(request.readyState===HttpAjaxPartRetriever.ReadyStatus.DONE){if(request._retriever._pending===null){request._retriever._pending=[];var that=request._retriever;window.setTimeout(function(){var l=that._pending.length;
for(var i=0;i<l;++i){var data64=null;var error=null;var request=that._pending[i];if(request.status===HttpAjaxPartRetriever.HttpStatus.OK||request.status===HttpAjaxPartRetriever.HttpStatus.PARTIAL_CONTENT){var data=that.getRequestData(request);if(request._retriever._decrypt&&request._part)data=request._retriever._decrypt(data,request._retriever._decrypt_options,request._part);data64=that.encode64(data);data=null}else error=request.statusText;request._retriever=null;that._flash.onPartReady(request._xod_rid,
data64,request.status,error)}that._pending=null},20)}request._retriever._pending.push(request)}};request.send("")};HttpAjaxPartRetriever._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
HttpAjaxPartRetriever.prototype.encode64=function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2))enc3=enc4=64;else if(isNaN(chr3))enc4=64;output=output+HttpAjaxPartRetriever._keyStr.charAt(enc1)+HttpAjaxPartRetriever._keyStr.charAt(enc2)+HttpAjaxPartRetriever._keyStr.charAt(enc3)+HttpAjaxPartRetriever._keyStr.charAt(enc4)}return output};
HttpAjaxPartRetriever.prototype._utf8_encode=function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128)utftext+=String.fromCharCode(c);else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext};
HttpAjaxPartRetriever.prototype.createRangeURL=function(url,range,useCache){var questionString=url.indexOf("?")===-1?"?":"&";if(!useCache)url=url+questionString+"_="+(new Date).getTime();else url=url+questionString+"_="+range.start+","+(range.stop?range.stop:"");return url};
HttpAjaxPartRetriever.prototype.createRequest=function(range,useCache){var url=this.createRangeURL(this._url,range,false);var request=new XMLHttpRequest;request.open("GET",url,true);if(range.stop)request.setRequestHeader("Range",["bytes=",range.start,"-",range.stop].join(""));else request.setRequestHeader("Range","bytes="+range.start);request.setRequestHeader("X-Requested-With","XMLHttpRequest");if(request.overrideMimeType)request.overrideMimeType("text/plain; charset=x-user-defined");else request.setRequestHeader("Accept-Charset",
"x-user-defined");return request};HttpAjaxPartRetriever.prototype.convertResponseBodyToText=function(binary){return IEBinaryToArray_Arr(binary).replace(/[\s\S]/g,function(t){var v=t.charCodeAt(0);return String.fromCharCode(v&255,v>>8)})+IEBinaryToArray_Arrl(binary)};
HttpAjaxPartRetriever.prototype.getRequestData=function(request,start){start=start||0;var responseString="",size;var data=swfobject.ua.ie?request.responseBody:request.responseText;if(swfobject.ua.ie){var responseArray=this.convertResponseBodyToText(data);size=responseArray.length;var arr=new Array(size);for(var j=0;j<size;j++)arr[j]=responseArray.charCodeAt(j)&255;var chunks=size/1024+1;for(var i=0;i<chunks;i++){var index=i*1024;responseString+=String.fromCharCode.apply(null,arr.slice(index,index+
1024))}}else{var arr=new Array(1024);var j=start;var result="";while(j<data.length){for(var k=0;k<1024&&j<data.length;++k){arr[k]=data.charCodeAt(j)&255;++j}responseString+=String.fromCharCode.apply(null,arr.slice(0,k))}}return responseString};HttpAjaxPartRetriever.ReadyStatus={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};HttpAjaxPartRetriever.HttpStatus={OK:200,PARTIAL_CONTENT:206};
if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var IEBinaryToArray_ByteStr_Script="<script type='text/vbscript'>\r\n"+"Function IEBinaryToArray_Arr(Binary)\r\n"+"   IEBinaryToArray_Arr = CStr(Binary)\r\n"+"End Function\r\n"+"Function IEBinaryToArray_Arrl(Binary)\r\n"+'   IEBinaryToArray_Arrl = ""\r\n'+"   lastIndex = LenB(Binary)\r\n"+"   if LenB(Binary) mod 2 Then IEBinaryToArray_Arrl = ChrW(AscB(RightB(Binary,1)))\r\n"+"End Function\r\n"+"\x3c/script>\r\n";document.write(IEBinaryToArray_ByteStr_Script)}
var _web_viewer_swfs={};function HttpAjaxPartRetrieverRequestRange(fid,rid,url,start,end,part){_web_viewer_swfs[fid][url].requestRange(rid,url,start,end,part)}function HttpAjaxPartRetrieverRequestOffset(fid,rid,url,offset,part){_web_viewer_swfs[fid][url].requestOffset(rid,url,offset,part)}
function createHttpAjaxPartRetriever(fid,url,decrypt,decrypt_options){if(!_web_viewer_swfs.hasOwnProperty(fid))_web_viewer_swfs[fid]={};var swf=_web_viewer_swfs[fid];if(!swf.hasOwnProperty(url))swf[url]=new HttpAjaxPartRetriever(fid,url,decrypt,decrypt_options)}function destroyHttpAjaxPartRetriever(fid,url){if(_web_viewer_swfs.hasOwnProperty(fid)){var swf=_web_viewer_swfs[fid];if(swf.hasOwnProperty(url))delete swf[url]}};(function(){if(typeof window!=="undefined"){var forge=window.forge=window.forge||{};forge.aes={}}else if(typeof module!=="undefined"&&module.exports){var forge={util:require("./util")};module.exports=forge.aes={}}else if(typeof self!=="undefined"){var forge=self.forge=self.forge||{};forge.aes={}}var init=false;var Nb=4;var sbox;var isbox;var rcon;var mix;var imix;var initialize=function(){init=true;rcon=[0,1,2,4,8,16,32,64,128,27,54];var xtime=new Array(256);for(var i=0;i<128;++i){xtime[i]=i<<1;xtime[i+
128]=i+128<<1^283}sbox=new Array(256);isbox=new Array(256);mix=new Array(4);imix=new Array(4);for(var i=0;i<4;++i){mix[i]=new Array(256);imix[i]=new Array(256)}var e=0,ei=0,e2,e4,e8,sx,sx2,me,ime;for(var i=0;i<256;++i){sx=ei^ei<<1^ei<<2^ei<<3^ei<<4;sx=sx>>8^sx&255^99;sbox[e]=sx;isbox[sx]=e;sx2=xtime[sx];e2=xtime[e];e4=xtime[e2];e8=xtime[e4];me=sx2<<24^sx<<16^sx<<8^sx^sx2;ime=(e2^e4^e8)<<24^(e^e8)<<16^(e^e4^e8)<<8^e^e2^e8;for(var n=0;n<4;++n){mix[n][e]=me;imix[n][sx]=ime;me=me<<24|me>>>8;ime=ime<<
24|ime>>>8}if(e===0)e=ei=1;else{e=e2^xtime[xtime[xtime[e2^e8]]];ei^=xtime[xtime[ei]]}}};var expandKey=function(key,decrypt){var w=key.slice(0);var temp,iNk=1;var Nk=w.length;var Nr1=Nk+6+1;var end=Nb*Nr1;for(var i=Nk;i<end;++i){temp=w[i-1];if(i%Nk===0){temp=sbox[temp>>>16&255]<<24^sbox[temp>>>8&255]<<16^sbox[temp&255]<<8^sbox[temp>>>24]^rcon[iNk]<<24;iNk++}else if(Nk>6&&i%Nk==4)temp=sbox[temp>>>24]<<24^sbox[temp>>>16&255]<<16^sbox[temp>>>8&255]<<8^sbox[temp&255];w[i]=w[i-Nk]^temp}if(decrypt){var tmp;
var m0=imix[0];var m1=imix[1];var m2=imix[2];var m3=imix[3];var wnew=w.slice(0);var end=w.length;for(var i=0,wi=end-Nb;i<end;i+=Nb,wi-=Nb)if(i===0||i===end-Nb){wnew[i]=w[wi];wnew[i+1]=w[wi+3];wnew[i+2]=w[wi+2];wnew[i+3]=w[wi+1]}else for(var n=0;n<Nb;++n){tmp=w[wi+n];wnew[i+(3&-n)]=m0[sbox[tmp>>>24]]^m1[sbox[tmp>>>16&255]]^m2[sbox[tmp>>>8&255]]^m3[sbox[tmp&255]]}w=wnew}return w};var _updateBlock=function(w,input,output,decrypt){var Nr=w.length/4-1;var m0,m1,m2,m3,sub;if(decrypt){m0=imix[0];m1=imix[1];
m2=imix[2];m3=imix[3];sub=isbox}else{m0=mix[0];m1=mix[1];m2=mix[2];m3=mix[3];sub=sbox}var a,b,c,d,a2,b2,c2;a=input[0]^w[0];b=input[decrypt?3:1]^w[1];c=input[2]^w[2];d=input[decrypt?1:3]^w[3];var i=3;for(var round=1;round<Nr;++round){a2=m0[a>>>24]^m1[b>>>16&255]^m2[c>>>8&255]^m3[d&255]^w[++i];b2=m0[b>>>24]^m1[c>>>16&255]^m2[d>>>8&255]^m3[a&255]^w[++i];c2=m0[c>>>24]^m1[d>>>16&255]^m2[a>>>8&255]^m3[b&255]^w[++i];d=m0[d>>>24]^m1[a>>>16&255]^m2[b>>>8&255]^m3[c&255]^w[++i];a=a2;b=b2;c=c2}output[0]=sub[a>>>
24]<<24^sub[b>>>16&255]<<16^sub[c>>>8&255]<<8^sub[d&255]^w[++i];output[decrypt?3:1]=sub[b>>>24]<<24^sub[c>>>16&255]<<16^sub[d>>>8&255]<<8^sub[a&255]^w[++i];output[2]=sub[c>>>24]<<24^sub[d>>>16&255]<<16^sub[a>>>8&255]<<8^sub[b&255]^w[++i];output[decrypt?1:3]=sub[d>>>24]<<24^sub[a>>>16&255]<<16^sub[b>>>8&255]<<8^sub[c&255]^w[++i]};var _createCipher=function(key,iv,output,decrypt){var cipher=null;if(!init)initialize();if(key.constructor==String&&(key.length==16||(key.length==24||key.length==32)))key=
forge.util.createBuffer(key);else if(key.constructor==Array&&(key.length==16||(key.length==24||key.length==32))){var tmp=key;var key=forge.util.createBuffer();for(var i=0;i<tmp.length;++i)key.putByte(tmp[i])}if(key.constructor!=Array){var tmp=key;key=[];var len=tmp.length();if(len==16||(len==24||len==32)){len=len>>>2;for(var i=0;i<len;++i)key.push(tmp.getInt32())}}if(key.constructor==Array&&(key.length==4||(key.length==6||key.length==8))){var _w=expandKey(key,decrypt);var _blockSize=Nb<<2;var _input;
var _output;var _inBlock;var _outBlock;var _prev;var _finish;cipher={output:null};cipher.update=function(input){if(!_finish)_input.putBuffer(input);var threshold=decrypt&&!_finish?_blockSize<<1:_blockSize;while(_input.length()>=threshold){if(decrypt)for(var i=0;i<Nb;++i)_inBlock[i]=_input.getInt32();else for(var i=0;i<Nb;++i)_inBlock[i]=_prev[i]^_input.getInt32();_updateBlock(_w,_inBlock,_outBlock,decrypt);if(decrypt){for(var i=0;i<Nb;++i)_output.putInt32(_prev[i]^_outBlock[i]);_prev=_inBlock.slice(0)}else{for(var i=
0;i<Nb;++i)_output.putInt32(_outBlock[i]);_prev=_outBlock}}};cipher.finish=function(pad){var rval=true;if(!decrypt)if(pad)rval=pad(_blockSize,_input,decrypt);else{var padding=_input.length()==_blockSize?_blockSize:_blockSize-_input.length();_input.fillWithByte(padding,padding)}if(rval){_finish=true;cipher.update()}if(decrypt){rval=_input.length()===0;if(rval)if(pad)rval=pad(_blockSize,_output,decrypt);else{var len=_output.length();var count=_output.at(len-1);if(count>Nb<<2)rval=false;else _output.truncate(count)}}return rval};
cipher.start=function(iv,output){iv=iv||_prev.slice(0);if(iv.constructor==String&&iv.length==16)iv=forge.util.createBuffer(iv);else if(iv.constructor==Array&&iv.length==16){var tmp=iv;var iv=forge.util.createBuffer();for(var i=0;i<16;++i)iv.putByte(tmp[i])}if(iv.constructor!=Array){var tmp=iv;iv=new Array(4);iv[0]=tmp.getInt32();iv[1]=tmp.getInt32();iv[2]=tmp.getInt32();iv[3]=tmp.getInt32()}_input=forge.util.createBuffer();_output=output||forge.util.createBuffer();_prev=iv.slice(0);_inBlock=new Array(Nb);
_outBlock=new Array(Nb);_finish=false;cipher.output=_output};if(iv!==null)cipher.start(iv,output)}return cipher};forge.aes.startEncrypting=function(key,iv,output){return _createCipher(key,iv,output,false)};forge.aes.createEncryptionCipher=function(key){return _createCipher(key,null,null,false)};forge.aes.startDecrypting=function(key,iv,output){return _createCipher(key,iv,output,true)};forge.aes.createDecryptionCipher=function(key){return _createCipher(key,null,null,true)};forge.aes._expandKey=function(key,
decrypt){if(!init)initialize();return expandKey(key,decrypt)};forge.aes._updateBlock=_updateBlock})();
(function(){if(typeof window!=="undefined"){var forge=window.forge=window.forge||{};forge.util={}}else if(typeof module!=="undefined"&&module.exports){var forge={};module.exports=forge.util={}}else if(typeof self!=="undefined"){var forge=self.forge=self.forge||{};forge.util={}}var util=forge.util;util.ByteBuffer=function(b){this.data=b||"";this.read=0};util.ByteBuffer.prototype.length=function(){return this.data.length-this.read};util.ByteBuffer.prototype.isEmpty=function(){return this.data.length-
this.read===0};util.ByteBuffer.prototype.putByte=function(b){this.data+=String.fromCharCode(b)};util.ByteBuffer.prototype.fillWithByte=function(b,n){b=String.fromCharCode(b);var d=this.data;while(n>0){if(n&1)d+=b;n>>>=1;if(n>0)b+=b}this.data=d};util.ByteBuffer.prototype.putBytes=function(bytes){this.data+=bytes};util.ByteBuffer.prototype.putString=function(str){this.data+=util.encodeUtf8(str)};util.ByteBuffer.prototype.putInt16=function(i){this.data+=String.fromCharCode(i>>8&255)+String.fromCharCode(i&
255)};util.ByteBuffer.prototype.putInt24=function(i){this.data+=String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255)};util.ByteBuffer.prototype.putInt32=function(i){this.data+=String.fromCharCode(i>>24&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255)};util.ByteBuffer.prototype.putInt16Le=function(i){this.data+=String.fromCharCode(i&255)+String.fromCharCode(i>>8&255)};util.ByteBuffer.prototype.putInt24Le=function(i){this.data+=
String.fromCharCode(i&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i>>16&255)};util.ByteBuffer.prototype.putInt32Le=function(i){this.data+=String.fromCharCode(i&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>24&255)};util.ByteBuffer.prototype.putInt=function(i,n){do{n-=8;this.data+=String.fromCharCode(i>>n&255)}while(n>0)};util.ByteBuffer.prototype.putBuffer=function(buffer){this.data+=buffer.getBytes()};util.ByteBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};
util.ByteBuffer.prototype.getInt16=function(){var rval=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);this.read+=2;return rval};util.ByteBuffer.prototype.getInt24=function(){var rval=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);this.read+=3;return rval};util.ByteBuffer.prototype.getInt32=function(){var rval=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<
8^this.data.charCodeAt(this.read+3);this.read+=4;return rval};util.ByteBuffer.prototype.getInt16Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;this.read+=2;return rval};util.ByteBuffer.prototype.getInt24Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;this.read+=3;return rval};util.ByteBuffer.prototype.getInt32Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+
1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;this.read+=4;return rval};util.ByteBuffer.prototype.getInt=function(n){var rval=0;do{rval=(rval<<n)+this.data.charCodeAt(this.read++);n-=8}while(n>0);return rval};util.ByteBuffer.prototype.getBytes=function(count){var rval;if(count){count=Math.min(this.length(),count);rval=this.data.slice(this.read,this.read+count);this.read+=count}else if(count===0)rval="";else{rval=this.read===0?this.data:this.data.slice(this.read);
this.clear()}return rval};util.ByteBuffer.prototype.bytes=function(count){return typeof count==="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+count)};util.ByteBuffer.prototype.at=function(i){return this.data.charCodeAt(this.read+i)};util.ByteBuffer.prototype.setAt=function(i,b){this.data=this.data.substr(0,this.read+i)+String.fromCharCode(b)+this.data.substr(this.read+i+1)};util.ByteBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util.ByteBuffer.prototype.copy=
function(){var c=util.createBuffer(this.data);c.read=this.read;return c};util.ByteBuffer.prototype.compact=function(){if(this.read>0){this.data=this.data.slice(this.read);this.read=0}};util.ByteBuffer.prototype.clear=function(){this.data="";this.read=0};util.ByteBuffer.prototype.truncate=function(count){var len=Math.max(0,this.length()-count);this.data=this.data.substr(this.read,len);this.read=0};util.ByteBuffer.prototype.toHex=function(){var rval="";for(var i=this.read;i<this.data.length;++i){var b=
this.data.charCodeAt(i);if(b<16)rval+="0";rval+=b.toString(16)}return rval};util.ByteBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes())};util.createBuffer=function(input,encoding){encoding=encoding||"raw";if(input!==undefined&&encoding==="utf8")input=util.encodeUtf8(input);return new util.ByteBuffer(input)};util.fillString=function(c,n){var s="";while(n>0){if(n&1)s+=c;n>>>=1;if(n>0)c+=c}return s};util.xorBytes=function(s1,s2,n){var s3="";var b="";var t="";var i=0;var c=0;for(;n>
0;--n,++i){b=s1.charCodeAt(i)^s2.charCodeAt(i);if(c>=10){s3+=t;t="";c=0}t+=String.fromCharCode(b);++c}s3+=t;return s3};util.hexToBytes=function(hex){var rval="";var i=0;if(hex.length&1==1){i=1;rval+=String.fromCharCode(parseInt(hex[0],16))}for(;i<hex.length;i+=2)rval+=String.fromCharCode(parseInt(hex.substr(i,2),16));return rval};util.bytesToHex=function(bytes){return util.createBuffer(bytes).toHex()};util.int32ToBytes=function(i){return String.fromCharCode(i>>24&255)+String.fromCharCode(i>>16&255)+
String.fromCharCode(i>>8&255)+String.fromCharCode(i&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var _base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];util.encode64=function(input,maxline){var line="";var output="";var chr1,chr2,chr3;var i=0;while(i<input.length){chr1=
input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);line+=_base64.charAt(chr1>>2);line+=_base64.charAt((chr1&3)<<4|chr2>>4);if(isNaN(chr2))line+="==";else{line+=_base64.charAt((chr2&15)<<2|chr3>>6);line+=isNaN(chr3)?"=":_base64.charAt(chr3&63)}if(maxline&&line.length>maxline){output+=line.substr(0,maxline)+"\r\n";line=line.substr(maxline)}}output+=line;return output};util.decode64=function(input){input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");var output="";var enc1,enc2,enc3,
enc4;var i=0;while(i<input.length){enc1=_base64Idx[input.charCodeAt(i++)-43];enc2=_base64Idx[input.charCodeAt(i++)-43];enc3=_base64Idx[input.charCodeAt(i++)-43];enc4=_base64Idx[input.charCodeAt(i++)-43];output+=String.fromCharCode(enc1<<2|enc2>>4);if(enc3!==64){output+=String.fromCharCode((enc2&15)<<4|enc3>>2);if(enc4!==64)output+=String.fromCharCode((enc3&3)<<6|enc4)}}return output};util.encodeUtf8=function(str){return unescape(encodeURIComponent(str))};util.decodeUtf8=function(str){return decodeURIComponent(escape(str))};
util.deflate=function(api,bytes,raw){bytes=util.decode64(api.deflate(util.encode64(bytes)).rval);if(raw){var start=2;var flg=bytes.charCodeAt(1);if(flg&32)start=6;bytes=bytes.substring(start,bytes.length-4)}return bytes};util.inflate=function(api,bytes,raw){var rval=api.inflate(util.encode64(bytes)).rval;return rval===null?null:util.decode64(rval)};var _setStorageObject=function(api,id,obj){if(!api)throw{message:"WebStorage not available."};var rval;if(obj===null)rval=api.removeItem(id);else{obj=
util.encode64(JSON.stringify(obj));rval=api.setItem(id,obj)}if(typeof rval!=="undefined"&&rval.rval!==true)throw rval.error;};var _getStorageObject=function(api,id){if(!api)throw{message:"WebStorage not available."};var rval=api.getItem(id);if(api.init)if(rval.rval===null){if(rval.error)throw rval.error;rval=null}else rval=rval.rval;if(rval!==null)rval=JSON.parse(util.decode64(rval));return rval};var _setItem=function(api,id,key,data){var obj=_getStorageObject(api,id);if(obj===null)obj={};obj[key]=
data;_setStorageObject(api,id,obj)};var _getItem=function(api,id,key){var rval=_getStorageObject(api,id);if(rval!==null)rval=key in rval?rval[key]:null;return rval};var _removeItem=function(api,id,key){var obj=_getStorageObject(api,id);if(obj!==null&&key in obj){delete obj[key];var empty=true;for(var prop in tmp){empty=false;break}if(empty)obj=null;_setStorageObject(api,id,obj)}};var _clearItems=function(api,id){_setStorageObject(api,id,null)};var _callStorageFunction=function(func,args,location){var rval=
null;if(typeof location==="undefined")location=["web","flash"];var type;var done=false;var exception=null;for(var idx in location){type=location[idx];try{if(type==="flash"||type==="both")if(args[0]===null)throw{message:"Flash local storage not available."};else{rval=func.apply(this,args);done=type==="flash"}if(type==="web"||type==="both"){args[0]=localStorage;rval=func.apply(this,args);done=true}}catch(ex){exception=ex}if(done)break}if(!done)throw exception;return rval};util.setItem=function(api,
id,key,data,location){_callStorageFunction(_setItem,arguments,location)};util.getItem=function(api,id,key,location){return _callStorageFunction(_getItem,arguments,location)};util.removeItem=function(api,id,key,location){_callStorageFunction(_removeItem,arguments,location)};util.clearItems=function(api,id,location){_callStorageFunction(_clearItems,arguments,location)};util.parseUrl=function(str){var regex=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;regex.lastIndex=0;var m=regex.exec(str);var url=m===
null?null:{full:str,scheme:m[1],host:m[2],port:m[3],path:m[4]};if(url){url.fullHost=url.host;if(url.port)if(url.port!==80&&url.scheme==="http")url.fullHost+=":"+url.port;else{if(url.port!==443&&url.scheme==="https")url.fullHost+=":"+url.port}else if(url.scheme==="http")url.port=80;else if(url.scheme==="https")url.port=443;url.full=url.scheme+"://"+url.fullHost}return url};var _queryVariables=null;util.getQueryVariables=function(query){var parse=function(q){var rval={};var kvpairs=q.split("&");for(var i=
0;i<kvpairs.length;i++){var pos=kvpairs[i].indexOf("=");var key;var val;if(pos>0){key=kvpairs[i].substring(0,pos);val=kvpairs[i].substring(pos+1)}else{key=kvpairs[i];val=null}if(!(key in rval))rval[key]=[];if(val!==null)rval[key].push(unescape(val))}return rval};var rval;if(typeof query==="undefined"){if(_queryVariables===null)if(typeof window==="undefined")_queryVariables={};else _queryVariables=parse(window.location.search.substring(1));rval=_queryVariables}else rval=parse(query);return rval};util.parseFragment=
function(fragment){var fp=fragment;var fq="";var pos=fragment.indexOf("?");if(pos>0){fp=fragment.substring(0,pos);fq=fragment.substring(pos+1)}var path=fp.split("/");if(path.length>0&&path[0]=="")path.shift();var query=fq==""?{}:util.getQueryVariables(fq);return{pathString:fp,queryString:fq,path:path,query:query}};util.makeRequest=function(reqString){var frag=util.parseFragment(reqString);var req={path:frag.pathString,query:frag.queryString,getPath:function(i){return typeof i==="undefined"?frag.path:
frag.path[i]},getQuery:function(k,i){var rval;if(typeof k==="undefined")rval=frag.query;else{rval=frag.query[k];if(rval&&typeof i!=="undefined")rval=rval[i]}return rval},getQueryLast:function(k,_default){var rval;var vals=req.getQuery(k);if(vals)rval=vals[vals.length-1];else rval=_default;return rval}};return req};util.makeLink=function(path,query,fragment){path=jQuery.isArray(path)?path.join("/"):path;var qstr=jQuery.param(query||{});fragment=fragment||"";return path+(qstr.length>0?"?"+qstr:"")+
(fragment.length>0?"#"+fragment:"")};util.setPath=function(object,keys,value){if(typeof object==="object"&&object!==null){var i=0;var len=keys.length;while(i<len){var next=keys[i++];if(i==len)object[next]=value;else{var hasNext=next in object;if(!hasNext||(hasNext&&typeof object[next]!=="object"||hasNext&&object[next]===null))object[next]={};object=object[next]}}}};util.getPath=function(object,keys,_default){var i=0;var len=keys.length;var hasNext=true;while(hasNext&&(i<len&&(typeof object==="object"&&
object!==null))){var next=keys[i++];hasNext=next in object;if(hasNext)object=object[next]}return hasNext?object:_default};util.deletePath=function(object,keys){if(typeof object==="object"&&object!==null){var i=0;var len=keys.length;while(i<len){var next=keys[i++];if(i==len)delete object[next];else{if(!(next in object)||(typeof object[next]!=="object"||object[next]===null))break;object=object[next]}}}};util.isEmpty=function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return false;return true};
util.format=function(format){var re=/%./g;var match;var part;var argi=0;var parts=[];var last=0;while(match=re.exec(format)){part=format.substring(last,re.lastIndex-2);if(part.length>0)parts.push(part);last=re.lastIndex;var code=match[0][1];switch(code){case "s":case "o":if(argi<arguments.length)parts.push(arguments[argi++ +1]);else parts.push("<?>");break;case "%":parts.push("%");break;default:parts.push("<%"+code+"?>")}}parts.push(format.substring(last));return parts.join("")};util.formatNumber=
function(number,decimals,dec_point,thousands_sep){var n=number,c=isNaN(decimals=Math.abs(decimals))?2:decimals;var d=dec_point===undefined?",":dec_point;var t=thousands_sep===undefined?".":thousands_sep,s=n<0?"-":"";var i=parseInt(n=Math.abs(+n||0).toFixed(c),10)+"";var j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")};util.formatSize=function(size){if(size>=1073741824)size=util.formatNumber(size/1073741824,
2,".","")+" GiB";else if(size>=1048576)size=util.formatNumber(size/1048576,2,".","")+" MiB";else if(size>=1024)size=util.formatNumber(size/1024,0)+" KiB";else size=util.formatNumber(size,0)+" bytes";return size}})();
(function(d){function h(b,c,d,l){for(var h=c.password||c.p,m=c.type.toUpperCase(),n=g.length,f,k=0;k<n;k++)g[k].d&&(f=g[k]);!f&&(4>n&&(f={d:!1,e:new Worker("DecryptWorker.js"),b:l},g[n]=f,f.e.addEventListener("message",function(b){f.d=!0;if(b.data.error)throw c.error&&c.error(b.data.error),Error(b.data.error);f.b(b.data);0<e.length?(b=e[0],e.shift(),f.d=!1,f.b=b.b,f.e.postMessage({data:b.data,password:b.i,partName:b.h,type:m})):f.b=null})));f?(f.d=!1,f.b=l,f.e.postMessage({data:b,password:h,partName:d,
type:m})):e.push({data:b,i:h,h:d,type:m,b:l})}var g=[],e=[];d.a=d.a||{};d.a.c=d.a.c||{};d.a.c.j=function(b,c,d,e){h(b,c,d,e)};d.a.c.g=function(b,c,e){var g=c.password||c.p;switch(c.type.toUpperCase()){case "AES":b=d.f(b,g,e);break;default:b=d.f(b,g,e)}if(b.error)throw c.error&&c.error(b.error),Error(b.error);return b}})(window);
(function(d){d.f=function(d,g,e){for(var b=[],c=0;16>c;++c){b[c]=c;c<g.length&&(b[c]|=g.charCodeAt(c));var p=e.length+c-16;0<=p&&(b[c]|=e.charCodeAt(p))}g=[];for(e=0;16>e;++e)g.push(d.charCodeAt(e));d=d.slice(16);b=forge.aes.startDecrypting(b,g);b.update(forge.util.createBuffer(d));return!b.finish()?{error:"Bad password or file corrupt"}:b.output.data}})(self);window.CoreControls={};window.CoreControls.Encryption={};window.CoreControls.Encryption.DecryptSynchronous=window.a.c.g;
